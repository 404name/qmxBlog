<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="Shortcut Icon" th:href="@{/static/img/qmx_icon.png}" type="image/x-icon"/>
        <link rel="icon" th:href="@{/static/img/qmx_icon.png}" sizes="32x32" type="image/png">
        <link rel="icon" th:href="@{/static/img/qmx_icon.png}" sizes="16x16" type="image/png">

        <title>我的账号</title>

        <link th:href="@{/static/vendor/fontawesome-free/css/all.min.css}" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
              rel="stylesheet">

        <link th:href="@{/static/css/myWeb-min.css}" rel="stylesheet">
        <style>
            /*去除a标签的所有效果*/
            /*包含以下四种的链接*/
            a {
                text-decoration: none;
            }

            /*正常的未被访问过的链接*/
            a:link {
                text-decoration: none;
            }

            /*已经访问过的链接*/
            a:visited {
                text-decoration: none;
            }

            /*鼠标划过(停留)的链接*/
            a:hover {
                text-decoration: none;
            }

            /* 正在点击的链接*/
            a:active {
                text-decoration: none;
            }

            td input {
                margin-bottom: 15px;
            }
        </style>
    </head>

    <body id="page-top" class="bg-light" onload="checkUserPage();">
        <div id="wrapper">

            <!-- 侧边栏 -->
            <div id="profileSideBar"
                 th:replace="commonModule/profileModule :: profileSideBar(active='profileDetail')"></div>
            <!-- 侧边栏到此为止啦 -->

            <!-- 接下来是主内容区域 -->
            <div id="content-wrapper" class="d-flex flex-column">

                <!-- 主内容 -->
                <div id="content">

                    <!-- 顶部头条内容 -->
                    <div th:replace="commonModule/module::navBar"></div>
                    <!-- 顶栏到此为止 -->

                    <!-- 主页内容 -->
                    <!--            统计卡片内容-->
                    <div class="container-fluid row">
                        <div class="col-lg-9">
                            <!--统计卡片-->
                            <div class="row mt-4">

                                <div class="col-xl-3 mb-4 animated--grow-in" style="height: 257.45px !important; transition: height 0.3s;">
                                    <div class="card border-left-info shadow h-100 py-2">
                                        <div class="card-body">
                                            <div class="row no-gutters align-items-center">

                                                <div class="col mr-2">
                                                    <div class="col-auto float-right">
                                                        <button onclick="unfoldThisCard(this);" class="btn btn-sm btn-outline-info" style="margin-top: -18px;margin-right: -20px;">更多</button>
                                                    </div>
                                                    <div class="font-weight-bold text-info text-uppercase mb-1">
                                                        <span id="myFollows">我关注的人</span>
                                                    </div>
                                                    <div class="mb-0 font-weight-bold text-gray-800 text-info" style="margin-left:-10px;width:190px;">
                                                        <div style="height: 160px;overflow-y:hidden;transition: all 0.3s;">
                                                            <div th:if="${user.getFollownum() > 0}" th:each="name,nameStat: ${user.getFollownameset()}">
                                                                <a th:href="'/showUser?id='+${user.getFollowidset()[nameStat.index]}" class="row ml-2 text-info" style="width: 180px;">
                                                                    <img  src="../../static/img/avatar/icon11.png" alt="" width="32" height="32">
                                                                    <div class="col-lg-8 mt-1" style="overflow: hidden;text-overflow: ellipsis;
                                                                        white-space: nowrap;max-width: 200px;width: 200px;">[[${name}]]</div>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xl-3 mb-4 animated--grow-in" style="height: 257.45px !important; transition: height 0.3s;">
                                    <div class="card border-left-primary shadow h-100 py-2">
                                        <div class="card-body">
                                            <div class="row no-gutters align-items-center">
                                                <div class="col mr-2">
                                                    <div class="col-auto float-right">
                                                        <button onclick="unfoldThisCard(this);" class="btn btn-sm btn-outline-info" style="margin-top: -18px;margin-right: -20px;">更多</button>
                                                    </div>
                                                    <div class="font-weight-bold text-primary text-uppercase mb-1">
                                                        <span id="followMe">关注我的人</span>
                                                    </div>
                                                    <div class="mb-0 font-weight-bold text-gray-800" style="margin-left:-10px;width:190px;">
                                                        <div style="height: 160px;overflow-y:hidden;transition: all 0.3s;">
                                                            <div th:if="${user.getBefollownum() > 0}" th:each="name,nameStat: ${user.getBefollownameset()}">
                                                                <a th:href="'/showUser?id='+${user.getBefollowidset()[nameStat.index]}" class="row ml-2"  style="width: 180px;">
                                                                    <img src="../../static/img/avatar/icon11.png" alt="" width="32" height="32">
                                                                    <div class="col-lg-8 mt-1" style="overflow: hidden;text-overflow: ellipsis;
                                                                        white-space: nowrap;max-width: 200px;width: 200px;margin-left: -10px;">[[${name}]]</div>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!--统计卡片-->
                                <div class="col-xl-3 mb-4 animated--grow-in" style="height: 257.45px !important; transition: height 0.3s;">
                                    <div class="card border-left-success shadow h-100 py-2">
                                        <div class="card-body">
                                            <div class="row no-gutters align-items-center">
                                                <div class="col mr-2">
                                                    <div class="col-auto float-right">
                                                        <a href="#myposting"><button  class="btn btn-sm btn-outline-info" style="margin-top: -18px;margin-right: -20px;">更多</button></a>
                                                    </div>
                                                    <div class="font-weight-bold text-success text-uppercase mb-1">
                                                        <span id="myPartPosts">我的发帖</span>
                                                    </div>
                                                    <div class="mb-0 font-weight-bold text-gray-800">
                                                        <div style="height: 160px;overflow-y:hidden;transition: all 0.3s;width: 190px;">
                                                            <!--                      这个div中填入th:if的值，请不要增删div的个数-->
                                                            <div th:each="myposting: ${user.getMypostingset()}">
                                                                <a class="text-success" style="opacity: 75%;" th:href="'/showPosting?type=1&postingid='+${myposting.getPostingid()}">
                                                                    <div class="col-lg-9 mt-1" style="overflow: hidden;text-overflow: ellipsis;
                                                                    white-space: nowrap;max-width: 190px;width: 190px;margin-left: -10px;">[[${myposting.getPostingtitle()}]]</div>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!--统计卡片-->
                                <div class="col-xl-3 mb-4 animated--grow-in" style="height: 257.45px !important; transition: height 0.3s;">
                                    <div class="card border-left-warning shadow h-100 py-2">
                                        <div class="card-body">
                                            <div class="row no-gutters align-items-center">
                                                <div class="col mr-2">
                                                    <div class="col-auto float-right">
                                                        <a href="#mycollection"><button class="btn btn-sm btn-outline-info" style="margin-top: -18px;margin-right: -20px;">更多</button></a>
                                                    </div>
                                                    <div class="font-weight-bold text-warning text-uppercase mb-1">
                                                        <span id="thePostsIlike">我关注的帖子</span>
                                                    </div>

                                                    <div class="h5 mb-0 font-weight-bold text-gray-800" style="font-size: 15px;">
                                                        <div style="height: 160px;overflow-y:hidden;transition: all 0.3s;width: 190px;">
                                                            <!--                      这个div中填入th:if的值，请不要增删div的个数-->
                                                            <div th:each="collection: ${user.getCollectionset()}">
                                                                <a class="text-warning" style="opacity: 75%;" th:href="'/showPosting?type=1&postingid='+${collection.getPostingid()}">
                                                                    <div class="col-lg-9 mt-1" style="overflow: hidden;text-overflow: ellipsis;
                                                                    white-space: nowrap;max-width: 190px;width: 190px;margin-left: -10px;">[[${collection.getPostingtitle()}]]</div>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                    <div class="col-xl-12 col-lg-8 mb-5  animated--grow-in">
                                        <div class="card shadow mb-4">
                                            <div class="jumbotron">
                                                <h1>下面待填入一些简洁的模块</h1>
                                                <p><a href="https://sm.ms/image/WxVHrcAJTsZfpUI" target="_blank"><img src="https://i.loli.net/2020/08/17/WxVHrcAJTsZfpUI.jpg" style="width: 100%"></a>
                                                    This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information.
                                                </p>
                                                <p><a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a></p>
                                            </div>
                                        </div>
                                    </div>
                                <div class="col-xl-12 col-lg-8 animated--grow-in">
                                    <div class="card shadow mb-4">
                                        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                            <h6 id="myReply" class="m-0 font-weight-bold text-info">我的回复</h6>
                                            <!--                  下拉菜单-->
                                            <div class="dropdown no-arrow">
                                                <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink1"
                                                   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                    <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                                     aria-labelledby="dropdownMenuLink1">
                                                    <a class="dropdown-item" href="#">刷新</a>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- 表格主体 -->
                                        <div class="card-body" id="myReply">
                                            <!--                  一个区块-->
                                            <div class="card mb-2">
                                                <div class="card-header">
                                                    <a class="mb-2" href="#">【开发组】2020年春季学期总结 </a><br/>
                                                    <div class="btn btn-sm btn-outline-secondary ml-2"
                                                         style="width: 50px;"><i class="fas fa-thumbs-up"></i> 0
                                                    </div>
                                                    <small class="text-muted">2020年春季学期总结：
                                                        1：因为疫情关系，一学期就这样结束了，感觉太快...</small>
                                                </div>
                                            </div>
                                            <!--                  一个区块-->
                                            <div class="card mb-2">
                                                <div class="card-header">
                                                    <a class="mb-2" href="#">【开发组】第十八周总结&&第十九周计划（2020.06.21） </a><br/>
                                                    <div class="btn btn-sm btn-outline-secondary ml-2"
                                                         style="width: 50px;"><i class="fas fa-thumbs-up"></i> 0
                                                    </div>
                                                    <small class="text-muted">每周总结：阿巴阿巴阿巴阿巴阿巴...</small>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <!--这个表格区域结束-->

                                <!--表格区域-->
                                <div class="col-xl-12 col-lg-8 mb-5  animated--grow-in">
                                    <div class="card shadow mb-4" id="myposting">
                                        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                            <h6 id="myPosts" class="m-0 font-weight-bold text-warning">我的发帖</h6>
                                            <!--                  下拉菜单-->
                                            <div class="dropdown no-arrow">
                                                <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink3"
                                                   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                    <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                                     aria-labelledby="dropdownMenuLink1">
                                                    <a class="dropdown-item" href="#">刷新</a>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- 表格主体 -->
                                        <div class="table-responsive">
                                            <table class="table table-bordered" id="myPostiingDataTable"
                                                   width="100%" cellspacing="0">
                                                <thead class="d-none">
                                                <tr class="d-none overflow-hidden">
                                                    <th>帖子内容</th>
                                                </tr>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <!--这个表格区域结束-->
                                    <div class="card shadow mb-4" id="mycollection">
                                        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                            <h6 id="myCollections" class="m-0 font-weight-bold text-warning">我的收藏</h6>
                                            <div class="dropdown no-arrow">
                                                <a class="dropdown-toggle" href="#" role="button"
                                                   id="dropdownMenuLink4"
                                                   data-toggle="dropdown" aria-haspopup="true"
                                                   aria-expanded="false">
                                                    <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                                     aria-labelledby="dropdownMenuLink1">
                                                    <a class="dropdown-item" href="#">刷新</a>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- 表格主体 -->
                                        <table class="table table-bordered" id="myCollectionDataTable"
                                               width="100%" cellspacing="0">
                                            <thead>
                                            <tr>
                                                <th>帖子内容</th>
                                            </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                                <!--这个表格区域结束-->
                            </div>


                        </div>
                        <div class="col-lg-3 mb-3">
                            <div class="row mt-4">
                                <div class="col-xl-11 col-lg-8 ml-4 mr  animated--grow-in">
                                    <div class="card shadow mb-4">
                                        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                            <h6 class="m-0 font-weight-bold text-info"><i
                                                    class="fas fa-pencil-alt"></i>基本信息</h6>
                                            <!--                  下拉菜单-->

                                            <div id="followOrNotArea">
                                                <button class="ml-1 btn btn-sm btn-success float-right align-self-center mx-auto" href="#" th:if="${followMsg} == '未关注'" onclick="follow(this)">关注</button>
                                                <button class="ml-1 btn btn-sm btn-success float-right align-self-center mx-auto" href="#" th:if="${followMsg} == '已关注'" onclick="follow(this)">取消关注</button>
                                            </div>
                                            <div class="dropdown no-arrow">
                                                <a class="dropdown-toggle" href="#" role="button"
                                                   data-toggle="dropdown" aria-haspopup="true"
                                                   aria-expanded="false">
                                                    <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                                     aria-labelledby="dropdownMenuLink1">
                                                    <a class="dropdown-item" href="#">刷新</a>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="d-none overflow-hidden">
                                            <small id="thisPageUserID" th:text="${user.getId()}"></small>
                                        </div>
                                        <div class="card-body row" id="accountBasicInfo">
                                            <table class="col-lg-4 ml-5 text-nowrap">
                                                <tr>
                                                    <th></th>
                                                    <th></th>
                                                </tr>
                                                <tr>
                                                    <td class="float-right">邮箱：
                                                    <td id="thisPageUserEmail" th:text="${user.getEmail()}"></td>
                                                </tr>
                                                <tr>
                                                    <td class="float-right">姓名：
                                                    <td id="thisPageUserName" th:text="${user.getUsername()}">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="float-right">性别：</td>
                                                    <td id="thisPageUserGender"><input class="" type="radio"
                                                               th:checked="${user.getGender() eq 0}"
                                                               name="gender" value="0"/>
                                                        <i class="fas fa-male text-primary mr-2"></i>
                                                        <input class="" type="radio"
                                                               th:checked="${user.getGender() eq 1}"
                                                               name="gender" value="1"/>
                                                        <i class="fas fa-female text-danger mr-2"></i>
                                                        <input class="" type="radio"
                                                               th:checked="${user.getGender() eq 2}"
                                                               name="gender" value="2"/> 保密
                                                    </td>
                                                </tr>
                                            </table>
                                            <div class="col-lg-5 text-center">
                                                <img src="../../static/img/avatar/icon19.png" alt="">
                                                <button id="updateAvatar"
                                                        class="btn btn-sm btn-success ml-2 text-nowrap">上传头像
                                                </button>
                                            </div>
                                            <table class="col-lg-11 mt-2">
                                                <tr>
                                                    <th></th>
                                                    <th></th>
                                                </tr>
                                                <tr>
                                                    <td class="float-right">生日：</td>
                                                    <td>
                                                        <div class="row" style="margin-left: 1px;">
                                                            <div id="MyBirthday" class="d-none overflow-hidden"
                                                                 th:text="${user.getBirthday()}"></div>
                                                            <!--                    如果想在一开始就选中某个 在哪个option上添加selected=""就好-->
                                                            <div class="text-nowrap col-lg-12">
                                                                <select id="MyBirthdayYear"
                                                                        class="form-control form-control-sm"
                                                                        style="width: 80px;" name="birthday_year">
                                                                    <option th:if="${user.getBirthday()} != null"
                                                                            th:value="${user.getBirthday().getYear()+1900}"
                                                                            th:text="${user.getBirthday().getYear()+1900}">
                                                                        空
                                                                    </option>
                                                                    <option th:if="${user.getBirthday()} eq null">空
                                                                    </option>
                                                                    <option value="2020">2020</option>
                                                                    <option value="2019">2019</option>
                                                                    <option value="2018">2018</option>
                                                                    <option value="2017">2017</option>
                                                                    <option value="2016">2016</option>
                                                                    <option value="2015">2015</option>
                                                                    <option value="2014">2014</option>
                                                                    <option value="2013">2013</option>
                                                                    <option value="2012">2012</option>
                                                                    <option value="2011">2011</option>
                                                                    <option value="2010">2010</option>
                                                                    <option value="2009">2009</option>
                                                                    <option value="2008">2008</option>
                                                                    <option value="2007">2007</option>
                                                                    <option value="2006">2006</option>
                                                                    <option value="2005">2005</option>
                                                                    <option value="2004">2004</option>
                                                                    <option value="2003">2003</option>
                                                                    <option value="2002">2002</option>
                                                                    <option value="2001">2001</option>
                                                                    <option value="2000">2000</option>
                                                                    <option value="1999">1999</option>
                                                                    <option value="1998">1998</option>
                                                                    <option value="1997">1997</option>
                                                                    <option value="1996">1996</option>
                                                                    <option value="1995">1995</option>
                                                                    <option value="1994">1994</option>
                                                                    <option value="1993">1993</option>
                                                                    <option value="1992">1992</option>
                                                                    <option value="1991">1991</option>
                                                                    <option value="1990">1990</option>
                                                                    <option value="1989">1989</option>
                                                                    <option value="1988">1988</option>
                                                                    <option value="1987">1987</option>
                                                                    <option value="1986">1986</option>
                                                                    <option value="1985">1985</option>
                                                                    <option value="1984">1984</option>
                                                                    <option value="1983">1983</option>
                                                                    <option value="1982">1982</option>
                                                                    <option value="1981">1981</option>
                                                                    <option value="1980">1980</option>
                                                                    <option value="1979">1979</option>
                                                                    <option value="1978">1978</option>
                                                                    <option value="1977">1977</option>
                                                                    <option value="1976">1976</option>
                                                                    <option value="1975">1975</option>
                                                                    <option value="1974">1974</option>
                                                                    <option value="1973">1973</option>
                                                                    <option value="1972">1972</option>
                                                                    <option value="1971">1971</option>
                                                                    <option value="1970">1970</option>
                                                                    <option value="1969">1969</option>
                                                                    <option value="1968">1968</option>
                                                                    <option value="1967">1967</option>
                                                                    <option value="1966">1966</option>
                                                                    <option value="1965">1965</option>
                                                                    <option value="1964">1964</option>
                                                                    <option value="1963">1963</option>
                                                                    <option value="1962">1962</option>
                                                                    <option value="1961">1961</option>
                                                                    <option value="1960">1960</option>
                                                                    <option value="1959">1959</option>
                                                                    <option value="1958">1958</option>
                                                                    <option value="1957">1957</option>
                                                                    <option value="1956">1956</option>
                                                                    <option value="1955">1955</option>
                                                                    <option value="1954">1954</option>
                                                                    <option value="1953">1953</option>
                                                                    <option value="1952">1952</option>
                                                                    <option value="1951">1951</option>
                                                                    <option value="1950">1950</option>
                                                                    <option value="1949">1949</option>
                                                                    <option value="1948">1948</option>
                                                                    <option value="1947">1947</option>
                                                                    <option value="1946">1946</option>
                                                                    <option value="1945">1945</option>
                                                                    <option value="1944">1944</option>
                                                                    <option value="1943">1943</option>
                                                                    <option value="1942">1942</option>
                                                                    <option value="1941">1941</option>
                                                                    <option value="1940">1940</option>
                                                                    <option value="1939">1939</option>
                                                                    <option value="1938">1938</option>
                                                                    <option value="1937">1937</option>
                                                                    <option value="1936">1936</option>
                                                                    <option value="1935">1935</option>
                                                                    <option value="1934">1934</option>
                                                                    <option value="1933">1933</option>
                                                                    <option value="1932">1932</option>
                                                                    <option value="1931">1931</option>
                                                                    <option value="1930">1930</option>
                                                                    <option value="1929">1929</option>
                                                                    <option value="1928">1928</option>
                                                                    <option value="1927">1927</option>
                                                                    <option value="1926">1926</option>
                                                                    <option value="1925">1925</option>
                                                                    <option value="1924">1924</option>
                                                                    <option value="1923">1923</option>
                                                                    <option value="1922">1922</option>
                                                                    <option value="1921">1921</option>
                                                                    <option value="1920">1920</option>
                                                                    <option value="1919">1919</option>
                                                                    <option value="1918">1918</option>
                                                                    <option value="1917">1917</option>
                                                                    <option value="1916">1916</option>
                                                                    <option value="1915">1915</option>
                                                                    <option value="1914">1914</option>
                                                                    <option value="1913">1913</option>
                                                                    <option value="1912">1912</option>
                                                                    <option value="1911">1911</option>
                                                                    <option value="1910">1910</option>
                                                                    <option value="1909">1909</option>
                                                                    <option value="1908">1908</option>
                                                                    <option value="1907">1907</option>
                                                                    <option value="1906">1906</option>
                                                                    <option value="1905">1905</option>
                                                                    <option value="1904">1904</option>
                                                                    <option value="1903">1903</option>
                                                                    <option value="1902">1902</option>
                                                                    <option value="1901">1901</option>
                                                                    <option value=""></option>
                                                                </select>
                                                                <small class="h6 ml-2 mr-2 mt-1" style="position: relative;right: -80px;top: -30px;"> 年 </small>
                                                            </div>
                                                            <div class="text-nowrap col-lg-12" style="margin-top: -10px;">
                                                                <select id="MyBirthdayMonth"
                                                                        class="form-control form-control-sm"
                                                                        style="width: 60px;" name="birthday_month">
                                                                    <option th:if="${user.getBirthday()} != null"
                                                                            th:value="${user.getBirthday().getMonth()+1}"
                                                                            th:text="${user.getBirthday().getMonth()+1}">
                                                                        空
                                                                    </option>
                                                                    <option th:if="${user.getBirthday()} eq null">空
                                                                    </option>
                                                                    <option value="1">1</option>
                                                                    <option value="2">2</option>
                                                                    <option value="3">3</option>
                                                                    <option value="4">4</option>
                                                                    <option value="5">5</option>
                                                                    <option value="6">6</option>
                                                                    <option value="7">7</option>
                                                                    <option value="8">8</option>
                                                                    <option value="9">9</option>
                                                                    <option value="10">10</option>
                                                                    <option value="11">11</option>
                                                                    <option value="12">12</option>
                                                                </select>
                                                                <small class="h6 ml-2 mr-2 mt-1" style="position: relative;right: -60px;top: -30px;"> 月 </small>
                                                            </div>
                                                            <div class="text-nowrap col-lg-12" style="margin-top: -10px;">
                                                                <select id="MyBirthdayDay"
                                                                        class="form-control form-control-sm"
                                                                        style="width: 60px;" name="birthday_day">
                                                                    <option th:if="${user.getBirthday()} != null"
                                                                            th:value="${user.getBirthday().getDate()}"
                                                                            th:text="${user.getBirthday().getDate()}">空
                                                                    </option>
                                                                    <option th:if="${user.getBirthday()} eq null">空
                                                                    </option>
                                                                    <option value="1">1</option>
                                                                    <option value="2">2</option>
                                                                    <option value="3">3</option>
                                                                    <option value="4">4</option>
                                                                    <option value="5">5</option>
                                                                    <option value="6">6</option>
                                                                    <option value="7">7</option>
                                                                    <option value="8">8</option>
                                                                    <option value="9">9</option>
                                                                    <option value="10">10</option>
                                                                    <option value="11">11</option>
                                                                    <option value="12">12</option>
                                                                    <option value="13">13</option>
                                                                    <option value="14">14</option>
                                                                    <option value="15">15</option>
                                                                    <option value="16">16</option>
                                                                    <option value="17">17</option>
                                                                    <option value="18">18</option>
                                                                    <option value="19">19</option>
                                                                    <option value="20">20</option>
                                                                    <option value="21">21</option>
                                                                    <option value="22">22</option>
                                                                    <option value="23">23</option>
                                                                    <option value="24">24</option>
                                                                    <option value="25">25</option>
                                                                    <option value="26">26</option>
                                                                    <option value="27">27</option>
                                                                    <option value="28">28</option>
                                                                    <option value="29">29</option>
                                                                    <option value="30">30</option>
                                                                    <option value="31">31</option>
                                                                </select>
                                                                <small class="h6 ml-2 mr-2 mt-1" style="position: relative;right: -60px;top: -30px;"> 日 </small>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="float-right text-nowrap">个性介绍：</td>
                                                    <td><textarea id="thisPageUserIntroduction" class="form-control form-group w-100" rows="1"
                                                                  placeholder="未填写"
                                                                  th:value="${user.getIntroduction()}"
                                                                  th:text="${user.getIntroduction()}"></textarea>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>

                                    </div>
                                </div>
                                <!--这个表格区域结束-->

                                <!--表格区域-->
                                <div class="col-xl-11 col-lg-8 ml-4  animated--grow-in">
                                    <div class="card shadow mb-4">
                                        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                            <h6 class="m-0 font-weight-bold text-warning"><i
                                                    class="fas fa-phone-alt"></i> 联系信息</h6>
                                            <!--                  下拉菜单-->
                                            <div class="dropdown no-arrow">
                                                <a class="dropdown-toggle" href="#" role="button"
                                                   id="dropdownMenuLink2"
                                                   data-toggle="dropdown" aria-haspopup="true"
                                                   aria-expanded="false">
                                                    <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                                     aria-labelledby="dropdownMenuLink1">
                                                    <a class="dropdown-item" href="#">刷新</a>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- 表格主体 -->
                                        <div class="card-body row" id="accountContactInfo">
                                            <table class="col-lg-10">
                                                <tr>
                                                    <th></th>
                                                    <th></th>
                                                </tr>
                                                <tr>
                                                    <td class="float-right">学号：</td>
                                                    <td><input id="thisPageUserSchooleID" class="form-control form-control-user w-100"
                                                               placeholder="未填写" th:value="${user.getSchoolid()}">
                                                    </td>
                                                </tr>
                                                <!--                                <tr>-->
                                                <!--                                    <td class="float-right">邮箱：</td>-->
                                                <!--                                    <td><input class="form-control form-control-user  w-75" placeholder="未填写" th:value="${user.getEmail()}"></td>-->
                                                <!--                                </tr>-->
                                                <tr>
                                                    <td class="float-right text-nowrap">手机号码：</td>
                                                    <td><input id="thisPageUserPhone" class="form-control form-control-user w-100"
                                                               placeholder="未填写"
                                                               th:value="${user.getPhonenumber()}"></td>
                                                </tr>
                                                <tr>
                                                    <td class="float-right text-nowrap">Git主页：</td>
                                                    <td><input id="thisPageUserGitPage" class="form-control form-group w-100"
                                                               placeholder="未填写" th:value="${user.getGitpage()}">
                                                    </td>
                                                </tr>
                                            </table>

                                        </div>

                                    </div>
                                </div>
                                <!--这个表格区域结束-->

                                <!--表格区域-->
                                <div class="col-xl-11 col-lg-8 ml-4  animated--grow-in">
                                    <div class="card shadow mb-4">
                                        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                            <h6 class="m-0 font-weight-bold text-primary"><i
                                                    class="fas fa-id-card"></i> 学业信息</h6>
                                            <!--                  下拉菜单-->
                                            <div class="dropdown no-arrow">
                                                <a class="dropdown-toggle" href="#" role="button"
                                                   data-toggle="dropdown" aria-haspopup="true"
                                                   aria-expanded="false">
                                                    <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                                     aria-labelledby="dropdownMenuLink1">
                                                    <a class="dropdown-item" href="#">刷新</a>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- 表格主体 -->
                                        <div class="card-body row" id="accountEducationInfo">
                                            <table class="col-lg-10">
                                                <tr>
                                                    <th></th>
                                                    <th></th>
                                                </tr>
                                                <!--                                <tr>-->
                                                <!--                                    <td class="float-right">所在学校：</td>-->
                                                <!--                                    <td><input class="form-control form-control-user  w-75" placeholder="未填写" th:value="${user.getSchool()}"></td>-->
                                                <!--                                </tr>-->
                                                <tr>
                                                    <td class="float-right text-nowrap">所在学院：</td>
                                                    <td><input  id="thisPageUserInstitute" class="form-control form-control-user  w-100"
                                                               placeholder="未填写" th:value="${user.getInstitute()}">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="float-right text-nowrap">入学年份：</td>
                                                    <td>
                                                        <div class="row" style="margin-left: 1px;">
                                                            <select id="thisPageUserMyEnrollmentYear" class="form-control form-control-sm"
                                                                    style="width: 80px;" name="enterSchool_year">
                                                                <option th:value="${user.getEnrollmentyear()}"
                                                                        th:text="${user.getEnrollmentyear()}">空
                                                                </option>
                                                                <option value="2020">2020</option>
                                                                <option value="2019">2019</option>
                                                                <option value="2018">2018</option>
                                                                <option value="2017">2017</option>
                                                                <option value="2016">2016</option>
                                                                <option value="2015">2015</option>
                                                                <option value="2014">2014</option>
                                                                <option value="2013">2013</option>
                                                                <option value="2012">2012</option>
                                                                <option value="2011">2011</option>
                                                                <option value="2010">2010</option>
                                                                <option value="2009">2009</option>
                                                                <option value="2008">2008</option>
                                                                <option value="2007">2007</option>
                                                                <option value="2006">2006</option>
                                                                <option value="2005">2005</option>
                                                                <option value="2004">2004</option>
                                                                <option value="2003">2003</option>
                                                                <option value="2002">2002</option>
                                                                <option value="2001">2001</option>
                                                                <option value="2000">2000</option>
                                                                <option value="1999">1999</option>
                                                                <option value="1998">1998</option>
                                                                <option value="1997">1997</option>
                                                                <option value="1996">1996</option>
                                                                <option value="1995">1995</option>
                                                                <option value="1994">1994</option>
                                                                <option value="1993">1993</option>
                                                                <option value="1992">1992</option>
                                                                <option value="1991">1991</option>
                                                                <option value="1990">1990</option>
                                                                <option value="1989">1989</option>
                                                                <option value="1988">1988</option>
                                                                <option value="1987">1987</option>
                                                                <option value="1986">1986</option>
                                                                <option value="1985">1985</option>
                                                                <option value="1984">1984</option>
                                                                <option value="1983">1983</option>
                                                                <option value="1982">1982</option>
                                                                <option value="1981">1981</option>
                                                                <option value="1980">1980</option>
                                                                <option value="1979">1979</option>
                                                                <option value="1978">1978</option>
                                                                <option value="1977">1977</option>
                                                                <option value="1976">1976</option>
                                                                <option value="1975">1975</option>
                                                                <option value="1974">1974</option>
                                                                <option value="1973">1973</option>
                                                                <option value="1972">1972</option>
                                                                <option value="1971">1971</option>
                                                                <option value="1970">1970</option>
                                                                <option value="1969">1969</option>
                                                                <option value="1968">1968</option>
                                                                <option value="1967">1967</option>
                                                                <option value="1966">1966</option>
                                                                <option value="1965">1965</option>
                                                                <option value="1964">1964</option>
                                                                <option value="1963">1963</option>
                                                                <option value="1962">1962</option>
                                                                <option value="1961">1961</option>
                                                                <option value="1960">1960</option>
                                                                <option value="1959">1959</option>
                                                                <option value="1958">1958</option>
                                                                <option value="1957">1957</option>
                                                                <option value="1956">1956</option>
                                                                <option value="1955">1955</option>
                                                                <option value="1954">1954</option>
                                                                <option value="1953">1953</option>
                                                                <option value="1952">1952</option>
                                                                <option value="1951">1951</option>
                                                                <option value="1950">1950</option>
                                                                <option value="1949">1949</option>
                                                                <option value="1948">1948</option>
                                                                <option value="1947">1947</option>
                                                                <option value="1946">1946</option>
                                                                <option value="1945">1945</option>
                                                                <option value="1944">1944</option>
                                                                <option value="1943">1943</option>
                                                                <option value="1942">1942</option>
                                                                <option value="1941">1941</option>
                                                                <option value="1940">1940</option>
                                                                <option value="1939">1939</option>
                                                                <option value="1938">1938</option>
                                                                <option value="1937">1937</option>
                                                                <option value="1936">1936</option>
                                                                <option value="1935">1935</option>
                                                                <option value="1934">1934</option>
                                                                <option value="1933">1933</option>
                                                                <option value="1932">1932</option>
                                                                <option value="1931">1931</option>
                                                                <option value="1930">1930</option>
                                                                <option value="1929">1929</option>
                                                                <option value="1928">1928</option>
                                                                <option value="1927">1927</option>
                                                                <option value="1926">1926</option>
                                                                <option value="1925">1925</option>
                                                                <option value="1924">1924</option>
                                                                <option value="1923">1923</option>
                                                                <option value="1922">1922</option>
                                                                <option value="1921">1921</option>
                                                                <option value="1920">1920</option>
                                                                <option value="1919">1919</option>
                                                                <option value="1918">1918</option>
                                                                <option value="1917">1917</option>
                                                                <option value="1916">1916</option>
                                                                <option value="1915">1915</option>
                                                                <option value="1914">1914</option>
                                                                <option value="1913">1913</option>
                                                                <option value="1912">1912</option>
                                                                <option value="1911">1911</option>
                                                                <option value="1910">1910</option>
                                                                <option value="1909">1909</option>
                                                                <option value="1908">1908</option>
                                                                <option value="1907">1907</option>
                                                                <option value="1906">1906</option>
                                                                <option value="1905">1905</option>
                                                                <option value="1904">1904</option>
                                                                <option value="1903">1903</option>
                                                                <option value="1902">1902</option>
                                                                <option value="1901">1901</option>
                                                                <option value=""></option>
                                                            </select>
                                                            <small class="h6 ml-2 mr-2 mt-2"> 年 </small>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <!--这个表格区域结束-->
                            </div>
                            <div class="col-lg-11 ml-4 mb-3">
<!--                                提交用户信息的表单-->
                                <form method="post" action="/updataUser">
<!--                                    对接后台后，这个表单的class中填入d-none隐藏掉就好-->
                                    <div class="d-none">
                                        <input id="" name="id" th:value="${user.getId()}">
                                        <input id="saveMyEmail" name="email">
                                        <input id="saveMyName" name="username">
                                        <input id="saveMyGender" name="gender">
                                        <input id="saveMyBirthday" name="birthday">
                                        <input id="saveMyIntroduction" name="introduction">
                                        <input id="saveMySchoolID" name="schoolid">
                                        <input id="saveMyPhone" name="phonenumber">
                                        <input id="saveMyGitPage" name="gitpage">
                                        <input id="saveMyInstitute" name="institute">
                                        <input id="saveMyEnrollmentYear" name="enrollmentYear">
                                    </div>
                                    <button id="saveInfoBtn" class="btn btn-success float-right" type="submit"
                                            onclick="setFormInputVal();">保存信息
                                    </button>
                                </form>
                            </div>
                        </div>
                        <!-- 统计卡片结束-->
                    </div>
                    <!-- 页脚 -->
                    <footer class="sticky-footer bg-white">
                        <div class="container my-auto">
                            <div class="copyright text-center my-auto">
                                <span>Copyright &copy; 三峡大学启明星工作室 2020 - 鄂ICP备15002584号</span>
                            </div>
                        </div>
                    </footer>
                    <!--页脚也就这么点点-->
                </div>
                <!-- 主体内容结束-->

            </div>


            <a class="scroll-to-top rounded" href="#page-top">
                <i class="fas fa-angle-up"></i>
            </a>

            <!--登出时弹出的窗口-->
            <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog"
                 aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">

                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">确定退出当前账号？</h5>
                            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                            </button>
                        </div>

                        <div class="modal-body m-0">保持登陆以防止错过重要信息</div>
                        <div class="modal-body m-0">您确定要这么做吗？</div>

                        <div class="modal-footer">
                            <!--                                                          这个命令可以开关这个div-->
                            <button class="btn btn-secondary" type="button" data-dismiss="modal">取消</button>
                            <a class="btn btn-info" th:href="@{login.html}">确定</a>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <script>
            function saveInfomation() {

            }

            function checkUserPage() {
                //alert($('#userID').text()+"|"+$('#thisPageUserID').text());
                if ($('#userID').text() === $('#thisPageUserID').text()) {
                    $('#saveInfoBtn').show();
                    $('#updateAvatar').show();
                    $('#followOrNotArea').hide();
                } else {
                    if($('#NowUserClass').text()!=="5"){
                        $('#saveInfoBtn').hide();
                        $('#updateAvatar').hide();
                        $('input').attr("disabled", "disabled");
                        $('select').attr("disabled", "disabled");
                        $('textarea').attr("disabled", "disabled");
                    }

                    $('#accordionSidebar').hide();
                    let thisPageUser = $('#thisPageUserName').text();
                    $('#myPosts').text(thisPageUser+"的发帖");
                    $('#myFollows').text(thisPageUser+"关注的人");
                    $('#followMe').text("关注"+thisPageUser+"的人");
                    $('#thePostsIlike').text(thisPageUser+"关注的帖子");
                    $('#myPartPosts').text(thisPageUser+"的发帖");
                    $('#myReply').text(thisPageUser+"的回复");
                    $('#myCollections').text(thisPageUser+"的收藏");
                }

                // let birthday = $('#MyBirthday').text();
                //alert(birthday);
            }
        </script>
        <script th:src="@{/static/vendor/jquery/jquery.min.js}"></script>
        <script th:src="@{/static/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>
        <script th:src="@{/static/vendor/jquery-easing/jquery.easing.min.js}"></script>

        <!--这里是jQuery的分页插件，反正就……挺好用的，在前端就可以排序，还可以搜索了-->
        <script th:src="@{/static/vendor/datatables/jquery.dataTables.min.js}"></script>
        <script th:src="@{/static/vendor/datatables/dataTables.bootstrap4.min.js}"></script>
        <!--        。。-->
        <script>
            let checkedGender1 = $('#thisPageUserGender').children().first();
            let checkedGender2 = $('#thisPageUserGender').children().first().next().next();
            let checkedGender3 = $('#thisPageUserGender').children().first().next().next().next().next();
            $(checkedGender1).click(function (){
                $(checkedGender1).attr("checked","checked");
                $(checkedGender2).removeAttr("checked");
                $(checkedGender3).removeAttr("checked");
            });
            $(checkedGender2).click(function (){
                $(checkedGender1).removeAttr("checked");
                $(checkedGender2).attr("checked","checked");
                $(checkedGender3).removeAttr("checked");
            });
            $(checkedGender3).click(function (){
                $(checkedGender1).removeAttr("checked");
                $(checkedGender2).removeAttr("checked");
                $(checkedGender3).attr("checked","checked");
            });
            function getCheckedGender(){
                // alert("获取性别信息");
                // alert($(checkedGender1).attr("checked")==="checked");
                // alert($(checkedGender2).attr("checked")==="checked");
                // alert($(checkedGender3).attr("checked")==="checked");
                if($(checkedGender1).attr("checked")==="checked"){
                    // alert("男");
                    return 0;
                }
                if($(checkedGender2).attr("checked")==="checked"){
                    // alert("女");
                    return 1;
                }

                if($(checkedGender3).attr("checked")==="checked"){
                    // alert("保密");
                    return 2;
                }
                alert("无");
            }
            function getCheckedBirthday(){
                let year = $('#MyBirthdayYear option:selected').val();
                let month = $('#MyBirthdayMonth option:selected').val();
                let day = $('#MyBirthdayDay option:selected').val();
                return year+"-"+month+"-"+day;
            }
            function IsMobile() {

                var isMobile = {
                    Android: function () {
                        return navigator.userAgent.match(/Android/i) ? true : false;
                    },
                    BlackBerry: function () {
                        return navigator.userAgent.match(/BlackBerry/i) ? true : false;
                    },
                    iOS: function () {
                        return navigator.userAgent.match(/iPhone|iPad|iPod/i) ? true : false;
                    },
                    Windows: function () {
                        return navigator.userAgent.match(/IEMobile/i) ? true : false;
                    },
                    any: function () {
                        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Windows());
                    }
                };
                return isMobile.any(); //是移动设备
            }
            (function ($) {
                "use strict";

                // 侧边栏导航的开合
                $("#sidebarToggle, #sidebarToggleTop").on('click', function (e) {
                    $("body").toggleClass("sidebar-toggled");
                    $(".sidebar").toggleClass("toggled");
                    if ($(".sidebar").hasClass("toggled")) {
                        $('.sidebar .collapse').collapse('hide');
                    }
                });

                // 当窗口尺寸小于768px等等条件时，缩小侧边栏以及下拉菜单或者搜索栏等等
                $(window).resize(function () {
                    if(!IsMobile()){
                        if ($(window).width() < 920) {
                            $("body").addClass("sidebar-toggled");
                            $(".sidebar").addClass("toggled");
                            $('.sidebar .collapse').collapse('hide');
                        }
                        // 窗口尺寸小于480px等等条件时，关闭侧边栏以及下拉菜单或者搜索栏等等
                        if ($(window).width() < 720 && !$(".sidebar").hasClass("toggled")) {
                            $("body").addClass("sidebar-toggled");
                            $(".sidebar").addClass("toggled");
                            $('.sidebar .collapse').collapse('hide');
                        }
                        if ($(window).width() < 1600) {
                            $(".sidebar").addClass("toggled");
                        } else {
                            $(".sidebar").removeClass("toggled");
                        }
                    }else{
                        $("body").addClass("sidebar-toggled");
                        $(".sidebar").addClass("toggled");
                        $('.sidebar .collapse').collapse('hide');
                    }

                });

                // 当侧边导航栏被固定的时候，防止滑动页面时出排版bug
                $('body.fixed-nav .sidebar').on('mousewheel DOMMouseScroll wheel', function (e) {
                    if ($(window).width() > 920) {
                        var e0 = e.originalEvent,
                            delta = e0.wheelDelta || -e0.detail;
                        this.scrollTop += (delta < 0 ? 1 : -1) * 30;
                        e.preventDefault();
                    }
                });

                // 滚动到顶部按钮的浮现
                $(document).on('scroll', function () {
                    var scrollDistance = $(this).scrollTop();
                    if (scrollDistance > 100) {
                        $('.scroll-to-top').fadeIn();
                    } else {
                        $('.scroll-to-top').fadeOut();
                    }
                });

                // 搭配jQuery实现返回顶部平滑的移动
                $(document).on('click', 'a.scroll-to-top', function (e) {
                    var $anchor = $(this);
                    $('html, body').stop().animate({
                        scrollTop: ($($anchor.attr('href')).offset().top)
                    }, 1000, 'easeInOutExpo');
                    e.preventDefault();
                });

                // 当未读取用户名时隐藏整个用户信息
                $(function () {
                    if (!$('#userName').html()) {
                        $('#user-area,#newEmailButton,#newMsgButton').hide();
                        $('#login-button').show();
                        $('#checkIn').hide();
                    } else {
                        $('#checkIn').show();
                        $('#login-button').hide();
                    }
                });
            })(jQuery);
            //获取url
            function getUrlParam(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                var r = window.location.search.substr(1).match(reg); //匹配目标参数
                if (r != null) return unescape(r[2]); return null; //返回参数值
            }
            function StringToDate(d) {
                //部分浏览器(IE)不支持日期格式“yyyy-MM-dd hh:mm:ss”,必须将“-”转化为“/”
                var date = new Date(Date.parse(d.replace(/-/g, "/")));
                return date;
            };
            function setFormInputVal(){
                // 开始的时候导入用户信息form数据
                let emailFormData = $('#thisPageUserEmail').text();
                let nameFormData = $('#thisPageUserName').text();
                let genderFormData = getCheckedGender();
                //alert(genderFormData);
                let birthdayYearFormData = getCheckedBirthday();
                let introductionFormData = $('#thisPageUserIntroduction').val();
                let schoolIDFormData = $('#thisPageUserSchooleID').val();
                let phoneFormData = $('#thisPageUserPhone').val();
                let gitPageFormData = $('#thisPageUserGitPage').val();
                let instituteFormData = $('#thisPageUserInstitute').val();
                let enrollmentYearFormData = $('#thisPageUserMyEnrollmentYear option:selected').val();

                $('#saveMyEmail').val(emailFormData);
                $('#saveMyName').val(nameFormData);
                $('#saveMyGender').val(genderFormData);
                $('#saveMyBirthday').val(StringToDate(birthdayYearFormData));
                $('#saveMyIntroduction').val(introductionFormData);
                $('#saveMySchoolID').val(schoolIDFormData);
                $('#saveMyPhone').val(phoneFormData);
                $('#saveMyGitPage').val(gitPageFormData);
                $('#saveMyInstitute').val(instituteFormData);
                $('#saveMyEnrollmentYear').val(enrollmentYearFormData);
            }
            var ajaxurl = "/user/selectUser?id=";
            $(document).ready(function () {

                setFormInputVal();

                ajaxurl += getUrlParam("id");
                $.ajax({
                    type: "GET",
                    url: ajaxurl,
                    success: function (data) {
                    }
                });
                 updatatable("myPostiingDataTable", "postingid", "user.mypostingset",3);
                 updatatable("myCollectionDataTable", "postingid","user.collectionset",3);
            });

            function updatatable( tableid, sortway,datasrc, size) {
                $('#' + tableid).DataTable({
                    "bInfo" : false,//关闭页脚
                    "bFilter" : false,    //关闭搜索
                    "bLengthChange" : false, //关闭长度选择
                    "scrollX": false,
                    'iDisplayLength': size,
                    "ajax":{
                        "url":ajaxurl,
                        "dataSrc": datasrc,
                    },
                    "columns": [
                        {
                            "data": sortway,
                            "render": function (data, type, full) {
                                let postingclassNum = full.postingclass;
                                let strPC = "";
                                switch (postingclassNum) {
                                    case 0:
                                        strPC = "常规帖";
                                        break;
                                    case 1:
                                        strPC = "学习总结";
                                        break;
                                    case 2:
                                        strPC = "答辩作品";
                                        break;
                                    case 3:
                                        strPC = "电脑带离";
                                        break;
                                    case 4:
                                        strPC = "聊天水贴";
                                        break;
                                    case 5:
                                        strPC = "实习工作";
                                        break;
                                    case 6:
                                        strPC = "算法总结";
                                        break;
                                    default:
                                        strPC = "常规帖";
                                        break;
                                }
                                var html =
                                    '<div class="">' +
                                    '<div class="col-xl-12 col-md-12 mb-1">' +
                                    '<div class="card border-left-primary shadow h-100 py-2">' +
                                    '<div class="card-body">' +
                                    '<div class="row no-gutters align-items-center">' +
                                    '<div class="col mr-auto">' +
                                    '<a href="/showPosting?type=1&postingid=' + full.postingid + '" class="font-weight-bold text-primary h5 mb-1 ml-2">' + full.postingtitle + '</a>' +
                                    '</div>' +
                                    '</div>' +
                                    '<div class="row no-gutters align-items-center">' +
                                    '<div class="col mr-auto">' +
                                    '<div class="mb-0 font-weight-bold text-gray-800 ml-2">' +
                                    '<small class="ml-1">发帖人：' + '<a class="text-info" href="/showUser?id=' + full.id + '" >' + full.username + '</a>' + '</small>' +
                                    '</div>' +
                                    '<div class="mb-0 font-weight-bold text-gray-800 ml-2">' +
                                    '<small class="ml-1">发帖时间：' + dateformat(full.postingdate) + '</small>' +
                                    '</div>' +
                                    '<div class="mb-0 font-weight-bold text-gray-800 ml-2">' +
                                    '<small class="ml-1">最新回复：' + dateformat(full.updatadate) + '</small>' +
                                    '</div>' +
                                    '</div>' +
                                    '<div class="mr-2">' +
                                    '<div class="list-inline">' +
                                    '<span class="badge badge-pill bg-light align-text-bottom">' +'<i class="fas fa-comment-dots fa-2x text-primary d-block"></i>' + '<small class="text-primary mt-2">' + strPC + '</small>' + '</span><br/>' +
                                    '<span class="badge badge-pill bg-light align-text-bottom">' + full.collectionnum + ' | 关注</span><br/>' +
                                    '<span class="badge badge-pill bg-info align-text-bottom text-light">' + full.commentnum + ' | 回复</span><br/>' +
                                    '<span class="badge badge-pill bg-light align-text-bottom">0 | 阅读</span><br/>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>';
                                return html;
                            }
                        }
                    ]
                });
                if(IsMobile()){
                    $('#postingTag').hide();
                }
            }

            function add0(m) {
                return m < 10 ? '0' + m : m
            }

            function dateformat(timestamp) {
                //timestamp是整数，否则要parseInt转换,不会出现少个0的情况
                var time = new Date(timestamp);
                var year = time.getFullYear();
                var month = time.getMonth() + 1;
                var date = time.getDate();
                var hours = time.getHours();
                var minutes = time.getMinutes();
                var seconds = time.getSeconds();
                return year + '-' + add0(month) + '-' + add0(date) + ' ' + add0(hours) + ':' + add0(minutes) + ':' + add0(seconds);
            }

            function follow(obj){
                let msg = $(obj).text();
                var userid = [[${session.loadUser.id}]];
                var username = "[[${session.loadUser.username}]]";
                var followid = [[${user.getId()}]];
                var followname = "[[${user.getUsername()}]]";
                $.post("/follow?userid=" + userid + "&username=" + username + "&followid=" + followid +"&followname="+followname, function (data) {
                    let msg = data.msg;
                    console.log(msg);
                    if (msg === "关注成功") {
                            $(obj).text("取消关注");
                    } else if (msg === "取消关注") {
                            $(obj).text("关注");
                    }
                });
            }
            function unfoldThisCard(obj){
                let cardAreaDiv=$(obj).parent().next().next();
                let mainCard = $(cardAreaDiv).parent().parent().parent().parent().parent();
                let unfoldDiv=$(cardAreaDiv).children().first().children().first();
                if($(unfoldDiv).css("height")!=="450px"){
                    $(unfoldDiv).css({
                        'height': '450px',
                        'overflow-y': 'scroll'
                    });
                    $(mainCard).css({
                        'height':'536px'
                    });
                }else{
                    $(unfoldDiv).css({
                        'height': '160px',
                        'overflow-y': 'hidden'
                    });
                    $(mainCard).css({
                        'height':'257.443px'
                    });
                }
            }
        </script>

    </body>

</html>
